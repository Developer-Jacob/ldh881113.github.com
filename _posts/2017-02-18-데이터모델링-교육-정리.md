---
layout: post
title: "[교육 내용정리] 데이터베이스 설계시 고려사항"
description: "NHN 루키 교육 중 DB 설계시 고려 사항에 대한 정리, 검수 내용정리"
date: 2017-02-18
tags: [database, db, 루키교육, DB설계]
comments: true
share: true
---

# DadaBase 설계시 고려사항
# 표준화 관점
## 데이터 표준화
### 표준화 정책
```
* 컬럼명은 테이터의 의미, 속성, 범위를 표함한 작명이 기본
* CamelCase가 아닌 SnakeCase 표기 권장 
    ex) voteId -\> vote_id
* 용어는 한글과 영어 1:1 매칭되도록 정의 해야함 
    ex) 지역(city)-\>도시(city)
* 컬럼명에 분류어 사용 권장 
    ex)  create_time -\> create_datetime, vote -\> vote_count
* 컬럼명의 명확성 필요
    ex)  item -\> item_name (item의 이름인지 코드인지 구별)
* 컬럼명 앞에 fk, pk를 붙히는 것은 좋지 않음, pk, fk속성을 모두 가질 수도 있음
```
### 시스템 공통 속성
```
데이터 추적관리를 위해 등록일시, 등록자, 수정일시, 수정자 등 관련 정보를 포함할 것
(수정이 없는 테이블인 경우 수정 관련 정보 생략 가능)
```
## 데이터 문서화 및 업무 규칙 상세화
### 데이터 관리 범위
```
데이터가 관리되는 범위를 나타냄(제외되는 부분은 추가 기록)
```
### 데이터 생성 규칙
```
데이터가 생성, 수정, 삭제되는 경우를 기록
ex)
정의 : 사용자의 아이디, 연락처 정보등을 관리하는 집합
데이터관리 범위 : PAYCO에서 관리하는 개인정보를 제외하고 서비스 내에서 입력한 정보만을 관리
데이터 생성규칙 : 
    * 생성 : 회원이 서비스 가입시나 관리자 일괄 가입 처리 시
    * 수정 : 회원이 정보 수정 시
    * 삭제 : 회원 탈퇴 후 30일이 지난 시점에 일관 배치 작업으로 삭제
```
### 사용자 상태 코드 정의
```
사용자의 회원 가입 상태를 나타내는 코드
코드 값 : ex) 01:정상 / 02:정지 / 03:탈퇴
```
# 구조적 관점
## 엔티티의 적절성
### 테이블을 분리하는 경우
```
 * 본 테이블 없이 단독으로 사용되는 고유의 컬럼이 많은 경우
 * 특정 컬럼의 변경의 소지가 많거나 업데이트가 잦아 성능 저하의 원인이 될 수 있는 경우
 * 사용자와 관리자가 1:1관계가 아닌 경우
```
### 식별자의 적절성
```
* 모든 테이블에는 PK가 필수이다.
* 인조식별자 
   - 모델이 심플해진다.
   - 상속이 단절되고 테이터 정합성 유지를 위해 별도의 index 추가가 필요
* 수정이 가능하거나 저장공간을 많이 차지하는 경우 PK에 적당하지 않음
    ex) URL, ~명, 설명
```
## 관계의 적절성
### 1:다 관계선의 의미
```
* 두개의 테이블 모두 동시에 insert되어야 한다는 의미(하나의 트랜잭션)
```
## 속성의 적절성
### 데이터 타입의 적절성
```
* 소숫점이 있는 숫자형 사요시 double, float 보다 decimal, numeric타입을 권장
    (고정 소숫점 사용 추천/ 부동 소숫점 연산시 오차 발생 가능)
```
# 기능적 관점
## 데이터 활용 가능성 및 성능, 기타
```
* 조회수, 추천수, 투표자 수 등 잦은 업데이트가 예상되는 컬럼이 있다면 락킹등의 성능 이슈가 발생할 수 있다는 점을 고려
    ex) 테이블을 별로도 분리 or 로그형태(insert 만 존재)의 관리로 변경을 검토해야 함
```
